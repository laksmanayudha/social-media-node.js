<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/posts.css">
    <link rel="stylesheet" href="/css/profile.css">
    <link rel="stylesheet" href="/fontawesome/css/all.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>Profile</title>
    
</head>
<body>
    <div class="bg-light">
        <nav class="navbar navbar-light bg-primary text-white" id="navigation">
            <div class="container-fluid d-flex justify-content-center align-items-center py-2">
                <div class="row nav-container">
                    <div class="col-4">
                        <div class="logo">
                            <h4>MyApplication</h4>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="search ">
                            <form action="">
                                <div class="search-container text-black">
                                    <i class="fas fa-search search-icon"></i>
                                    <input class="form-control" type="text" name="search" id="search" placeholder="search" autocomplete="off"> 
                                    <div class="search-result bg-light p-3 rounded shadow w-100 hide">
                                        <div class="user-search-profile">
                                            <!-- <a class="text-decoration-none text-black " href="/profile">
                                                <div class="username-container d-flex align-items-center">
                                                    <img src="/img/user.png" alt="">
                                                    <div class="ms-3"><strong>test</strong></div>
                                                </div>
                                            </a> -->
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="col-4 d-flex justify-content-end align-items-center">
                        <div class="menu">
                            <span class="ms-4"><a href="/posts" class="text-white"><i class="fa-lg fas fa-home"></i></a></span>
                            <span class="ms-4"><a href="#" class="text-white"><i class="fa-lg fas fa-comment-medical"></i></a></span>
                            <span class="ms-4"><i class="fa-lg far fa-plus-square" id="createPost"></i></span>
                            <span class="ms-4"><a href="#" class="text-white"><i class="fa-lg fas fa-compass"></i></a></span>
                            <span class="ms-4"><a href="#" class="text-white"><i class="fa-lg fas fa-heart"></i></a></span>
                            <span class="ms-4">
                                <span class="text-white" id="userIcon">
                                    <i class="fa-lg fas fa-user"></i>
                                    <div class="profile-setting bg-light p-3 rounded shadow hide">
                                        <div><a class="text-decoration-none text-secondary " href="/profile?user=<%= user.username %> ">Profile</a></div>
                                        <div class="border-top mt-2"><a class="text-decoration-none text-secondary " href="/logout">Logout</a></div>
                                    </div>
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
        <div class="main d-flex justify-content-center">
            <div class="profile-post">
                <div class="profile-container d-flex">
                    <div class="image-profile-container d-flex justify-content-center align-items-center p-2">
                        <img class="rounded-circle" src="/img/user.png" alt="">
                    </div>
                    <div class="profile-desc d-flex flex-column justify-content-center ms-5">
                        <div class="username-followers">
                            <div class="username d-flex justify-content-between">
                                <h2><%= userQuery %></h2>
                                <form action="" class="ms-3">
                                    <button class="btn btn-light border">Edit profile</button>
                                </form>
                            </div>
                            <div class="followers d-flex justify-content-lg-between mt-3">
                                <span class=""><strong>10</strong> Posts</span>
                                <span class=""><strong>10</strong> Followers</span>
                                <span class=""><strong>10</strong> Following</span>
                            </div>
                        </div>
                        <div class="desc mt-3">
                            <span>Lorem ipsum dolor sit amet consectetur adipisicing elit. Repellendus molestiae expedita officia consequatur. Pariatur debitis cumque laboriosam id praesentium quas quis labore eum dolore iure, ipsa beatae fugiat magnam itaque?</span>
                        </div>
                    </div>
                </div>
                <hr class="">
                <div class="posts-container">
                    <% let i = 1; %> 
                    <% for(let userPost of userData.userPosts) {%> 
                        <% if (i == 1) {%> 
                            <div class="row mt-3">
                        <% } %> 

                            <div class="col-4">
                                <a href="">
                                    <div class="post">
                                        <img src="<%= userPost.image %> " alt="">
                                        <div class="opac"></div>
                                    </div>
                                </a>
                            </div>
                        
                        <% if (i == 3) {%> 
                            </div>
                            <% i = 1; continue; %> 
                        <% } %> 
                        <% i += 1 %> 
                    <% } %> 
                </div>
            </div>
        </div>
    </div>

    <!-- create post -->
    <div class="create-post-container" id="createPostForm" hidden>
        <div class="close">
            <span><i class="fa-2x fas fa-times text-white" id="closeButton"></i></span>
        </div>
        <div class="create-post bg-white">
            <div class="new-post text-center p-3 border-bottom">
                <strong>Create new post</strong>
            </div>
            <form class="insert-data-form" action="/post/create" method="post" enctype="multipart/form-data" >
                <div class="row insert-data">
                    <div class="col-7 create-images d-flex justify-content-center align-items-center">
                        <img src=" " alt="" id="imageDataCover" hidden>
                        <input type="file" name="imageData" id="createImageData" required>
                    </div>
                    <div class="col-5 caption-container border-start">
                        <div class="caption mt-3 px-2 me-3">
                            <div class="username-container d-flex align-items-center">
                                <img src="/img/user.png" alt="">
                                <div class="ms-3"><strong><%= user.username %> </div>
                            </div>
                            <div class="mt-3">
                                <textarea class="caption-input p-2 border-1 border rounded" name="caption" id="caption" cols="30" rows="30" placeholder="Write caption here..."></textarea>
                            </div>
                            <div class="d-flex flex-row-reverse">
                                <button type="submit" class="btn btn-primary px-4" id="createPostButton" disabled>Post</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="/js/posts.js"></script>
    <script src="/js/profile.js" ></script>
</body>
</html>